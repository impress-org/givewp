function give_load_gateway(e,i){var t=jQuery(e).find("#give-payment-mode-select .give-loading-text"),a=jQuery(e).find("#give-amount").val(),n=jQuery(e).find('input[name="give-form-id"]').val();t.fadeIn();var o=jQuery(e).data();1!=o["blockUI.isBlocked"]&&jQuery(e).find("#give_purchase_form_wrap").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),jQuery.post(give_scripts.ajaxurl+"?payment-mode="+i,{action:"give_load_gateway",give_total:a,give_form_id:n,give_payment_mode:i},function(i){jQuery(e).unblock(),jQuery(e).find("#give_purchase_form_wrap").html(i),jQuery(".give-no-js").hide(),jQuery(e).find("#give-payment-mode-select .give-loading-text").fadeOut(),jQuery(document).trigger("give_gateway_loaded",[i,jQuery(e).attr("id")])})}var give_scripts,give_global_vars;jQuery(document).ready(function(e){e(".give-loading-text").hide(),e(document).on("click",".give-checkout-login",function(i){var t=e(this),a=e(this).parents("form"),n=e(a).find('[id^="give-checkout-login-register"] .give-loading-text'),o={action:t.data("action"),form_id:e(a).find('[name="give-form-id"]').val()};return n.show(),e.post(give_scripts.ajaxurl,o,function(i){e(a).find("[id^=give-checkout-login-register]").html(i),e(a).find(".give-submit-button-wrap").hide()}).done(function(){n.hide(),give_fl_trigger()}),!1}),e(document).on("click",".give-checkout-register-cancel",function(i){i.preventDefault();var t=e(this),a=e(this).parents("form"),n={action:t.data("action"),form_id:e(a).find('[name="give-form-id"]').val()};e.post(give_scripts.ajaxurl,n,function(i){e(a).find("[id^=give-checkout-login-register]").html(e.parseJSON(i.fields)),e(a).find(".give-submit-button-wrap").show()}).done(function(){give_fl_trigger()})}),e(document).on("click","[id^=give-login-fields] input[type=submit]",function(i){i.preventDefault();var t=e(this).val(),a=e(this).parents("form");e(this).val(give_global_vars.purchase_loading),a.find("[id^=give-login-fields] .give-loading-animation").fadeIn();var n={action:"give_process_donation_login",give_ajax:1,give_user_login:a.find("[name=give_user_login]").val(),give_user_pass:a.find("[name=give_user_pass]").val(),give_form_id:a.find("[name=give-form-id]").val()};e.post(give_global_vars.ajaxurl,n,function(i){void 0!=e.trim(typeof i.success)&&1==i.success&&void 0!=typeof i.data?(a.find(".give_errors").remove(),a.find("#give-payment-mode-select").after(i.data),a.find(".give_notices.give_errors").delay(5e3).slideUp(),Give.form.fn.resetNonce(a),give_load_gateway(a,a.find(".give-gateway-option-selected input").val())):(a.find("[id^=give-login-fields] input[type=submit]").val(t),a.find(".give-loading-animation").fadeOut(),a.find(".give_errors").remove(),a.find("[id^=give-user-login-submit]").before(i.data))})}),e("select#give-gateway, input.give-gateway").on("change",function(i){i.preventDefault();var t=e(this).val();return"0"==t?(console.log("There was a problem loading the selected gateway"),!1):(give_load_gateway(e(this).parents("form"),t),!1)}),e("body").on("click","#give-confirm-email-btn",function(i){var t=e(this),a={action:"give_confirm_email_for_donations_access",email:t.data("email"),nonce:give_scripts.ajaxNonce};return t.text(give_global_vars.loading),t.attr("disabled","disabled"),e.post(give_global_vars.ajaxurl,a,function(e){e=JSON.parse(e),"error"===e.status?(t.closest("#give_user_history tfoot").hide(),t.closest(".give_user_history_main").find(".give_user_history_notice").html(e.message)):"success"===e.status&&(t.closest(".give_user_history_main").find(".give_user_history_notice").html(e.message),t.hide(),t.closest(".give-security-button-wrap").find("span").show())}),!1}),e("body").on("click touchend",'form.give-form input[name="give-purchase"].give-submit',function(i){var t=e(this).parents("form.give-form"),a=t.find('input[type="submit"].give-submit + .give-loading-animation');a.fadeIn();var n=t.get(0);if("function"!=typeof n.checkValidity||n.checkValidity()!==!1||(a.fadeOut(),(navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1)!=!1)){i.preventDefault();var o=e(this).val();e(this).val(give_global_vars.purchase_loading),Give.form.fn.disable(t,!0),e.post(give_global_vars.ajaxurl,t.serialize()+"&action=give_process_donation&give_ajax=true",function(i){"success"==e.trim(i)?(t.find(".give_errors").remove(),e(n).submit(),t.trigger("give_form_validation_passed")):(t.find('input[type="submit"].give-submit').val(o),a.fadeOut(),t.find(".give_errors").remove(),t.find('#give_purchase_submit input[type="submit"].give-submit').before(i),Give.form.fn.disable(t,!1))})}})});