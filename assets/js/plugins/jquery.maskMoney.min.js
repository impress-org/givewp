!function(e){"use strict";e.browser||(e.browser={},e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var t={destroy:function(){return e(this).unbind(".maskMoney"),e.browser.msie&&(this.onpaste=null),this},mask:function(t){return this.each(function(){var n=e(this);return"number"==typeof t&&n.val(t),n.trigger("mask")})},unmasked:function(){return this.map(function(){var t,n=e(this).val()||"0",a=-1!==n.indexOf("-");return e(n.split(/\D/).reverse()).each(function(e,n){return n?(t=n,!1):void 0}),n=n.replace(/\D/g,""),n=n.replace(new RegExp(t+"$"),"."+t),a&&(n="-"+n),parseFloat(n)})},init:function(t){return t=e.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1},t),this.each(function(){function n(){var e,t,n,a,r,i=y.get(0),o=0,s=0;return"number"==typeof i.selectionStart&&"number"==typeof i.selectionEnd?(o=i.selectionStart,s=i.selectionEnd):(t=document.selection.createRange(),t&&t.parentElement()===i&&(a=i.value.length,e=i.value.replace(/\r\n/g,"\n"),n=i.createTextRange(),n.moveToBookmark(t.getBookmark()),r=i.createTextRange(),r.collapse(!1),n.compareEndPoints("StartToEnd",r)>-1?o=s=a:(o=-n.moveStart("character",-a),o+=e.slice(0,o).split("\n").length-1,n.compareEndPoints("EndToEnd",r)>-1?s=a:(s=-n.moveEnd("character",-a),s+=e.slice(0,s).split("\n").length-1)))),{start:o,end:s}}function a(){var e=!(y.val().length>=y.attr("maxlength")&&y.attr("maxlength")>=0),t=n(),a=t.start,r=t.end,i=t.start!==t.end&&y.val().substring(a,r).match(/\d/)?!0:!1,o="0"===y.val().substring(0,1);return e||i||o}function r(e){y.each(function(t,n){if(n.setSelectionRange)n.focus(),n.setSelectionRange(e,e);else if(n.createTextRange){var a=n.createTextRange();a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",e),a.select()}})}function i(e){var t="";return e.indexOf("-")>-1&&(e=e.replace("-",""),t="-"),t+w.prefix+e+w.suffix}function o(e){var t,n,a,r=e.indexOf("-")>-1&&w.allowNegative?"-":"",o=e.replace(/[^0-9]/g,""),s=o.slice(0,o.length-w.precision);return s=s.replace(/^0*/g,""),s=s.replace(/\B(?=(\d{3})+(?!\d))/g,w.thousands),""===s&&(s="0"),t=r+s,w.precision>0&&(n=o.slice(o.length-w.precision),a=new Array(w.precision+1-n.length).join(0),t+=w.decimal+a+n),i(t)}function s(e){var t,n=y.val().length;y.val(o(y.val())),t=y.val().length,e-=n-t,r(e)}function l(){var e=y.val();w.precision>0&&e.indexOf(w.decimal)<0&&(e+=w.decimal+new Array(w.precision+1).join(0)),y.val(o(e))}function c(){var e=y.val();return w.allowNegative?""!==e&&"-"===e.charAt(0)?e.replace("-",""):"-"+e:e}function u(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function v(t){t=t||window.event;var r,i,o,l,v,d=t.which||t.charCode||t.keyCode;return void 0===d?!1:48>d||d>57?45===d?(y.val(c()),!1):43===d?(y.val(y.val().replace("-","")),!1):13===d||9===d?!0:!e.browser.mozilla||37!==d&&39!==d||0!==t.charCode?(u(t),!0):!0:a()?(u(t),r=String.fromCharCode(d),i=n(),o=i.start,l=i.end,v=y.val(),y.val(v.substring(0,o)+r+v.substring(l,v.length)),s(o+1),!1):!1}function d(e){e=e||window.event;var t,a,r,i,o,l=e.which||e.charCode||e.keyCode;return void 0===l?!1:(t=n(),a=t.start,r=t.end,8===l||46===l||63272===l?(u(e),i=y.val(),a===r&&(8===l?""===w.suffix?a-=1:(o=i.split("").reverse().join("").search(/\d/),a=i.length-o-1,r=a+1):r+=1),y.val(i.substring(0,a)+i.substring(r,i.length)),s(a),!1):9===l?!0:!0)}function f(){b=y.val(),l();var e,t=y.get(0);t.createTextRange&&(e=t.createTextRange(),e.collapse(!1),e.select())}function g(){setTimeout(function(){l()},0)}function p(){var e=parseFloat("0")/Math.pow(10,w.precision);return e.toFixed(w.precision).replace(new RegExp("\\.","g"),w.decimal)}function h(t){if(e.browser.msie&&v(t),""===y.val()||y.val()===i(p()))y.val(w.allowZero?w.affixesStay?i(p()):p():"");else if(!w.affixesStay){var n=y.val().replace(w.prefix,"").replace(w.suffix,"");y.val(n)}y.val()!==b&&y.change()}function m(){var e,t=y.get(0);t.setSelectionRange?(e=y.val().length,t.setSelectionRange(e,e)):y.val(y.val())}var w,b,y=e(this);w=e.extend({},t),w=e.extend(w,y.data()),y.unbind(".maskMoney"),y.bind("keypress.maskMoney",v),y.bind("keydown.maskMoney",d),y.bind("blur.maskMoney",h),y.bind("focus.maskMoney",f),y.bind("click.maskMoney",m),y.bind("cut.maskMoney",g),y.bind("paste.maskMoney",g),y.bind("mask.maskMoney",l)})}};e.fn.maskMoney=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.maskMoney"):t.init.apply(this,arguments)}}(window.jQuery||window.Zepto);