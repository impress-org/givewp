jQuery.noConflict(),function(e){var t=function(){if(e(".give_datepicker").length>0){var t="mm/dd/yy";e(".give_datepicker").datepicker({dateFormat:t})}},n=function(){e(".give-select-chosen").chosen({inherit_select_classes:!0,placeholder_text_single:give_vars.one_option,placeholder_text_multiple:give_vars.one_or_more_option}),e("#post").on("click",".give-thickbox",function(){e(".give-select-chosen","#choose-give-form").css("width","100%")})},o={init:function(){this.edit_address(),this.add_note(),this.remove_note(),this.new_donor(),this.resend_receipt()},edit_address:function(){e('select[name="give-payment-address[0][country]"]').change(function(){var t=e(this);return data={action:"give_get_states",country:t.val(),field_name:"give-payment-address[0][state]"},e.post(ajaxurl,data,function(t){"nostates"==t?e("#give-order-address-state-wrap select, #give-order-address-state-wrap input").replaceWith('<input type="text" name="give-payment-address[0][state]" value="" class="give-edit-toggles medium-text"/>'):e("#give-order-address-state-wrap select, #give-order-address-state-wrap input").replaceWith(t)}),!1})},add_note:function(){e("#give-add-payment-note").on("click",function(t){t.preventDefault();var n={action:"give_insert_payment_note",payment_id:e(this).data("payment-id"),note:e("#give-payment-note").val()};if(n.note)e.ajax({type:"POST",data:n,url:ajaxurl,success:function(t){e("#give-payment-notes-inner").append(t),e(".give-no-payment-notes").hide(),e("#give-payment-note").val("")}}).fail(function(e){window.console&&window.console.log&&console.log(e)});else{var o=e("#give-payment-note").css("border-color");e("#give-payment-note").css("border-color","red"),setTimeout(function(){e("#give-payment-note").css("border-color",o)},500)}})},remove_note:function(){e("body").on("click",".give-delete-payment-note",function(t){if(t.preventDefault(),confirm(give_vars.delete_payment_note)){var n={action:"give_delete_payment_note",payment_id:e(this).data("payment-id"),note_id:e(this).data("note-id")};return e.ajax({type:"POST",data:n,url:ajaxurl,success:function(t){return e("#give-payment-note-"+n.note_id).remove(),e(".give-payment-note").length||e(".give-no-payment-notes").show(),!1}}).fail(function(e){window.console&&window.console.log&&console.log(e)}),!0}})},new_donor:function(){e("#give-customer-details").on("click",".give-payment-new-customer, .give-payment-new-customer-cancel",function(t){t.preventDefault(),e(".customer-info").toggle(),e(".new-customer").toggle(),e(".new-customer").is(":visible")?e("#give-new-customer").val(1):e("#give-new-customer").val(0)})},resend_receipt:function(){e("body").on("click","#give-resend-receipt",function(e){return confirm(give_vars.resend_receipt)})}},i={init:function(){this.toggle_options()},toggle_options:function(){var t=e("#email_access");t.on("change",function(){t.prop("checked")?e(".cmb2-id-recaptcha-key, .cmb2-id-recaptcha-secret").show():e(".cmb2-id-recaptcha-key, .cmb2-id-recaptcha-secret").hide()}).change()}},a={init:function(){this.date_options(),this.donors_export()},date_options:function(){e("#give-graphs-date-options").change(function(){var t=e(this);"other"===t.val()?e("#give-date-range-options").show():e("#give-date-range-options").hide()})},donors_export:function(){e("#give_donor_export_download").change(function(){var t=e(this);e("option:selected",t).val();"0"===t.val()?e("#give_donor_export_option").show():e("#give_donor_export_option").hide(),e(".give_price_options_select").remove()})}},s=function(){e('select[name="give-payment-status"]').on("change",function(){var t=e(this).val();console.log(t),e(".give-donation-status").removeClass(function(e,t){return(t.match(/\bstatus-\S+/g)||[]).join(" ")}).addClass("status-"+t)})},r={init:function(){this.edit_customer(),this.user_search(),this.remove_user(),this.cancel_edit(),this.change_country(),this.add_note(),this.delete_checked()},edit_customer:function(){e("body").on("click","#edit-customer",function(t){t.preventDefault(),e("#give-customer-card-wrapper .editable").hide(),e("#give-customer-card-wrapper .edit-item").fadeIn().css("display","block")})},user_search:function(){e("body").on("click.giveSelectUser",".give_user_search_results a",function(t){t.preventDefault();var n=e(this).data("userid");e('input[name="customerinfo[user_id]"]').val(n)})},remove_user:function(){e("body").on("click","#disconnect-customer",function(t){t.preventDefault();var n=e('input[name="customerinfo[id]"]').val(),o={give_action:"disconnect-userid",customer_id:n,_wpnonce:e("#edit-customer-info #_wpnonce").val()};e.post(ajaxurl,o,function(e){window.location.href=window.location.href},"json")})},cancel_edit:function(){e("body").on("click","#give-edit-customer-cancel",function(t){t.preventDefault(),e("#give-customer-card-wrapper .edit-item").hide(),e("#give-customer-card-wrapper .editable").show(),e(".give_user_search_results").html("")})},change_country:function(){e('select[name="customerinfo[country]"]').change(function(){var t=e(this),n={action:"give_get_states",country:t.val(),field_name:"customerinfo[state]"};return e.post(ajaxurl,n,function(t){"nostates"==t?e(':input[name="customerinfo[state]"]').replaceWith('<input type="text" name="'+n.field_name+'" value="" class="give-edit-toggles medium-text"/>'):e(':input[name="customerinfo[state]"]').replaceWith(t)}),!1})},add_note:function(){e("body").on("click","#add-customer-note",function(t){t.preventDefault();var n={give_action:"add-customer-note",customer_id:e("#customer-id").val(),customer_note:e("#customer-note").val(),add_customer_note_nonce:e("#add_customer_note_nonce").val()};if(n.customer_note)e.ajax({type:"POST",data:n,url:ajaxurl,success:function(t){e("#give-customer-notes").prepend(t),e(".give-no-customer-notes").hide(),e("#customer-note").val("")}}).fail(function(e){window.console&&window.console.log&&console.log(e)});else{var o=e("#customer-note").css("border-color");e("#customer-note").css("border-color","red"),setTimeout(function(){e("#customer-note").css("border-color",o)},500)}})},delete_checked:function(){e("#give-customer-delete-confirm").change(function(){var t=e("#give-customer-delete-records"),n=e("#give-delete-customer");e(this).prop("checked")?(t.attr("disabled",!1),n.attr("disabled",!1)):(t.attr("disabled",!0),t.prop("checked",!1),n.attr("disabled",!0))})}},c={init:function(){this.revoke_api_key(),this.regenerate_api_key()},revoke_api_key:function(){e("body").on("click",".give-revoke-api-key",function(e){return confirm(give_vars.revoke_api_key)})},regenerate_api_key:function(){e("body").on("click",".give-regenerate-api-key",function(e){return confirm(give_vars.regenerate_api_key)})}},d=function(){jQuery('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},style:{classes:"qtip-rounded qtip-tipsy"},events:{show:function(t,n){var o=e(n.elements.target[0]);o.qtip("option","position.my",void 0==o.data("tooltip-my-position")?"bottom center":o.data("tooltip-my-position")),o.qtip("option","position.at",void 0==o.data("tooltip-target-position")?"top center":o.data("tooltip-target-position"))}}})};e(function(){t(),s(),n(),o.init(),i.init(),a.init(),r.init(),c.init(),d(),e("a.give-rating-link").click(function(){jQuery(this).parent().text(jQuery(this).data("rated"))}),e(".give-ajax-user-search").on("keyup",function(){var t=e(this).val(),n="";e(this).data("exclude")&&(n=e(this).data("exclude")),e(".give-ajax").show(),data={action:"give_search_users",user_name:t,exclude:n},document.body.style.cursor="wait",e.ajax({type:"POST",data:data,dataType:"json",url:ajaxurl,success:function(t){e(".give-ajax").hide(),e(".give_user_search_results").removeClass("hidden"),e(".give_user_search_results span").html(""),e(t.results).appendTo(".give_user_search_results span"),document.body.style.cursor="default"}})}),e("body").on("click.giveSelectUser",".give_user_search_results span a",function(t){t.preventDefault();var n=e(this).data("login");e(".give-ajax-user-search").val(n),e(".give_user_search_results").addClass("hidden"),e(".give_user_search_results span").html("")}),e("body").on("click.giveCancelUserSearch",".give_user_search_results a.give-ajax-user-cancel",function(t){t.preventDefault(),e(".give-ajax-user-search").val(""),e(".give_user_search_results").addClass("hidden"),e(".give_user_search_results span").html("")})})}(jQuery);