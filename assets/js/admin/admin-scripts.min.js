function give_render_responsive_tabs(){var e=jQuery(".give-settings-page"),t=jQuery("h2.give-nav-tab-wrapper"),i=e.width(),n=jQuery(".give-sub-nav-tab-wrapper"),a=jQuery("nav",n),s=jQuery("div.give-nav-tab-wrapper > a:not(give-not-tab)"),o=[],r=[],d=0;if(600<jQuery(window).outerWidth()&&(d=200),!e.length)return!1;t.css({height:"auto",overflow:"visible"}),s.removeClass("give-hidden");var c=new Promise(function(e,t){jQuery.each(s,function(e,t){t=jQuery(t),d+=parseInt(t.outerWidth()),d<i?o.push(t):r.push(t)}),e(!0)});c.then(function(e){if(r.length&&-1!==window.location.search.indexOf("&tab=")){var i={},s=get_url_params();r=r.filter(function(e){var t=-1!==parseInt(e.attr("href").indexOf("&tab="+s.tab));return t&&(i=e),!t}),i.length&&(r.unshift(o.pop()),o.push(i))}var d=new Promise(function(e,t){o.length&&jQuery.each(o,function(e,t){t=jQuery(t),t.hasClass("give-hidden")&&t.removeClass("give-hidden")}),e(!0)});d.then(function(e){r.length?(a.html(""),jQuery.each(r,function(e,t){t=jQuery(t),t.hasClass("nav-tab-active")||t.addClass("give-hidden"),t.clone().removeClass().appendTo(a)}),jQuery(".give-sub-nav-tab-wrapper",t).length||t.append(n),n.show()):n.hide()})})}function get_url_params(){for(var e,t=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<i.length;n++)e=i[n].split("="),t[e[0]]=e[1];return t}function give_on_core_settings_import_start(){var e=jQuery("form.tools-setting-page-import"),t=e.find(".give-progress");give_setting_edit=!0,jQuery.ajax({type:"POST",url:ajaxurl,data:{action:give_vars.core_settings_import,fields:e.serialize()},dataType:"json",success:function(e){give_setting_edit=!1,!0===e.success?jQuery(t).find("div").width(e.percentage+"%"):alert(give_vars.error_message),window.location=e.url},error:function(){give_setting_edit=!1,alert(give_vars.error_message)}})}function give_on_donation_import_start(){give_on_donation_import_ajax()}function give_on_donation_import_ajax(){var e=jQuery("form.tools-setting-page-import");give_setting_edit=!0;var t=e.find(".give-progress"),i=jQuery(t).data("total_ajax"),n=jQuery(t).data("current"),a=jQuery(t).data("start"),s=jQuery(t).data("end"),o=jQuery(t).data("next"),r=jQuery(t).data("total"),d=jQuery(t).data("per_page");jQuery.ajax({type:"POST",url:ajaxurl,data:{action:give_vars.give_donation_import,total_ajax:i,current:n,start:a,end:s,next:o,total:r,per_page:d,fields:e.serialize()},dataType:"json",success:function(e){jQuery(t).data("current",e.current),jQuery(t).find("div").width(e.percentage+"%"),1==e.next?(jQuery(t).data("start",e.start),jQuery(t).data("end",e.end),1==e.last&&jQuery(t).data("next",!1),give_on_donation_import_ajax()):(give_setting_edit=!1,window.location=e.url)},error:function(){give_setting_edit=!1,alert(give_vars.error_message)}})}jQuery.noConflict();var give_setting_edit=!1;!function(e){function t(e,t){return e=accounting.unformat(e,give_vars.decimal_separator).toString(),t="undefined"!==t&&t,e=!1!==t?parseFloat(e).toFixed(t):parseFloat(e).toFixed(give_vars.currency_decimals)}var i=function(t,i){i=jQuery.extend({wrapper:!0,show:!1},i);var n=i.wrapper?e(".give-spinner-wrapper",t):{},a=e(".give-spinner",t);return i.show?(n.length&&n.addClass("is-active"),void a.addClass("is-active")):(n.length&&n.removeClass("is-active"),void a.removeClass("is-active"))},n=function(){e("body").on("click","button.notice-dismiss",function(){"give-invalid-license"!==jQuery(this).closest("div.give-notice").data("notice-id")&&a()})},a=function(){var e="give-message",t=document.location.href,i=t.split("?");if(i.length>=2){for(var n=i.shift(),a=i.join("?"),s=encodeURIComponent(e)+"=",o=a.split(/[&;]/g),r=o.length;r-- >0;)o[r].lastIndexOf(s,0)!==-1&&o.splice(r,1);t=n+"?"+o.join("&"),window.history.pushState("",document.title,t)}return t},s=function(){if(e(".give_datepicker").length>0){var t="mm/dd/yy";e(".give_datepicker").datepicker({dateFormat:t})}},o=function(){var t=e(".give-select-chosen");t.on("chosen:ready",function(){e(this).next(".chosen-container").find("input.chosen-search-input").after('<span class="spinner"></span>')}),t.on("chosen:no_results",function(){var t=e(this).next(".chosen-container"),i=t.find("li.no-results"),n="";n=t.hasClass("give-select-chosen-ajax")&&i.length?give_vars.chosen.ajax_search_msg.replace("{search_term}",'"'+e("input",t).val()+'"'):give_vars.chosen.no_results_msg.replace("{search_term}",'"'+e("input",t).val()+'"'),i.html(n)}),t.chosen({inherit_select_classes:!0,placeholder_text_single:give_vars.one_option,placeholder_text_multiple:give_vars.one_or_more_option}),e(".chosen-container").each(function(){0===e(this).width()&&e(this).css("width","100%")}),e("#post").on("click",".give-thickbox",function(){e(".give-select-chosen","#choose-give-form").css("width","100%")});var i,n=342;e(document.body).on("keyup",".give-select.chosen-container .chosen-search input, .give-select.chosen-container .search-field input",function(t){var a=e(this).val(),s=e(this).closest(".give-select-chosen"),o=s.prev(),r=s.find('input[type="text"]'),d=(s.hasClass("variations"),t.which),c="give_forms_search";if(s.prev().data("search-type")){if("no_ajax"===o.data("search-type"))return;c="give_"+o.data("search-type")+"_search"}a.length<=3||!c.length||9===d||13===d||16===d||17===d||18===d||19===d||20===d||27===d||33===d||34===d||35===d||36===d||37===d||38===d||39===d||40===d||44===d||45===d||144===d||145===d||91===d||93===d||224===d||112<=d&&123>=d||(clearTimeout(i),s.addClass("give-select-chosen-ajax"),i=setTimeout(function(){e.ajax({type:"GET",url:ajaxurl,data:{action:c,s:a},dataType:"json",beforeSend:function(){o.closest("ul.chosen-results").empty(),r.prop("disabled",!0)},success:function(t){s.removeClass("give-select-chosen-ajax"),e("option:not(:selected)",o).remove(),t.length?(e.each(t,function(t,i){e('option[value="'+i.id+'"]',o).length||o.prepend('<option value="'+i.id+'">'+i.name+"</option>")}),s.prev("select.give-select-chosen").trigger("chosen:updated")):s.prev("select.give-select-chosen").trigger("chosen:no_results"),r.prop("disabled",!1),r.val(a).focus()}}).fail(function(e){window.console&&window.console.log&&console.log(e)}).done(function(e){r.prop("disabled",!1)})},n))}),e(".give-select-chosen .chosen-search input").each(function(){var t=e(this).parent().parent().parent().prev("select.give-select-chosen").data("search-type"),i="";"form"===t?i=give_vars.search_placeholder:(t="search_placeholder_"+t,give_vars[t]&&(i=give_vars[t])),e(this).attr("placeholder",i)})},r={init:function(){this.deleteSingleDonation(),this.resendSingleDonationReceipt()},deleteSingleDonation:function(){e("body").on("click",".delete-single-donation",function(){return confirm(give_vars.delete_payment)})},resendSingleDonationReceipt:function(){e("body").on("click",".resend-single-donation-receipt",function(){return confirm(give_vars.resend_receipt)})}},d={init:function(){this.edit_address(),this.add_note(),this.remove_note(),this.new_donor(),this.resend_receipt(),this.variable_price_list()},edit_address:function(){e('select[name="give-payment-address[0][country]"]').change(function(){var t=e(this);return data={action:"give_get_states",country:t.val(),field_name:"give-payment-address[0][state]"},e.post(ajaxurl,data,function(i){t.closest(".column-container").find("#give-order-address-state-wrap").removeClass("give-hidden"),t.closest(".column-container").find(".give-column").removeClass("column-full"),t.closest(".column-container").find(".give-column").addClass("column");var n=e("#give-order-address-state-wrap");n.find("*").not(".order-data-address-line").remove(),void 0!==typeof i.states_found&&!0===i.states_found?(n.append(i.data),n.find("select").chosen()):(n.append('<input type="text" name="give-payment-address[0][state]" value="'+i.default_state+'" class="give-edit-toggles medium-text"/>'),void 0!==typeof i.show_field&&!1===i.show_field&&(t.closest(".column-container").find("#give-order-address-state-wrap").addClass("give-hidden"),t.closest(".column-container").find(".give-column").addClass("column-full"),t.closest(".column-container").find(".give-column").removeClass("column")))}),!1})},add_note:function(){e("#give-add-payment-note").on("click",function(t){t.preventDefault();var i={action:"give_insert_payment_note",payment_id:e(this).data("payment-id"),note:e("#give-payment-note").val()};if(i.note)e.ajax({type:"POST",data:i,url:ajaxurl,success:function(t){e("#give-payment-notes-inner").append(t),e(".give-no-payment-notes").hide(),e("#give-payment-note").val("")}}).fail(function(e){window.console&&window.console.log&&console.log(e)});else{var n=e("#give-payment-note").css("border-color");e("#give-payment-note").css("border-color","red"),setTimeout(function(){e("#give-payment-note").css("border-color",n)},500)}})},remove_note:function(){e("body").on("click",".give-delete-payment-note",function(t){if(t.preventDefault(),confirm(give_vars.delete_payment_note)){var i={action:"give_delete_payment_note",payment_id:e(this).data("payment-id"),note_id:e(this).data("note-id")};return e.ajax({type:"POST",data:i,url:ajaxurl,success:function(t){return e("#give-payment-note-"+i.note_id).remove(),e(".give-payment-note").length||e(".give-no-payment-notes").show(),!1}}).fail(function(e){window.console&&window.console.log&&console.log(e)}),!0}})},new_donor:function(){e("#give-donor-details").on("click",".give-payment-new-donor, .give-payment-new-donor-cancel",function(t){t.preventDefault(),e(".donor-info").toggle(),e(".new-donor").toggle(),e(".new-donor").is(":visible")?e("#give-new-donor").val(1):e("#give-new-donor").val(0)})},resend_receipt:function(){e("body").on("click","#give-resend-receipt",function(e){return confirm(give_vars.resend_receipt)})},variable_price_list:function(){e("#give_payment_form_select").chosen().change(function(){var t,i=e(".give-donation-level");return!!(t=e(this).val())&&(!!i.length&&void e.ajax({type:"POST",url:ajaxurl,data:{form_id:t,payment_id:e('input[name="give_payment_id"]').val(),action:"give_check_for_form_price_variations_html"},success:function(t){t=t.trim(),t?(i.html(t),e('select[name="give-variable-price"]').chosen().change()):i.html("")}}))}),e("#give-donation-overview").on("change",'select[name="give-variable-price"]',function(){var t=jQuery(this).data("prices"),i=e("#give-payment-total");""!==t&&e(this).val()in t&&(i.val(t[e(this).val()]).css("background-color","yellow"),window.setTimeout(function(){i.css("background-color","white")},1e3))})}},c={init:function(){this.setting_change_country(),this.toggle_options(),this.main_setting_update_notice(),this.verify_settings(),this.saveButtonTriggered(),this.changeAlert(),this.detectSettingsChange()},setting_change_country:function(){e('select[name="base_country"]').change(function(){var t=e(this),i={action:"give_get_states",country:t.val(),field_name:"base_state"};return e.post(ajaxurl,i,function(n){t.closest("tr").next().show(),void 0!=typeof n.states_found&&1==n.states_found?e(':input[name="base_state"]').replaceWith(n.data):(void 0!=typeof n.show_field&&0==n.show_field&&t.closest("tr").next().hide(),e(':input[name="base_state"]').replaceWith('<input type="text" name="'+i.field_name+'" value="'+n.default_state+'" class="give-edit-toggles medium-text"/>'))}),!1})},toggle_options:function(){var t=e('input[name="email_access"]',".give-setting-tab-body-general");t.on("change",function(){var t=e('input[name="email_access"]:checked',".give-setting-tab-body-general").val();"enabled"===t?(e("#recaptcha_key").parents("tr").show(),e("#recaptcha_secret").parents("tr").show()):(e("#recaptcha_key").parents("tr").hide(),e("#recaptcha_secret").parents("tr").hide())}).change();var i=e('input[name="form_featured_img"]',".give-setting-tab-body-display");i.on("change",function(){var t=e('input[name="form_featured_img"]:checked',".give-setting-tab-body-display").val();"enabled"===t?e("#featured_image_size").parents("tr").show():e("#featured_image_size").parents("tr").hide()}).change();var n=e('input[name="terms"]',".give-setting-tab-body-display");n.on("change",function(){var t=e('input[name="terms"]:checked',".give-setting-tab-body-display").val();"enabled"===t?(e("#agree_to_terms_label").parents("tr").show(),e("#wp-agreement_text-wrap").parents("tr").show()):(e("#agree_to_terms_label").parents("tr").hide(),e("#wp-agreement_text-wrap").parents("tr").hide())}).change();var a=e('input[name="admin_notices"]',".give-setting-tab-body-emails");a.on("change",function(){var t=e('input[name="admin_notices"]:checked',".give-setting-tab-body-emails").val();"enabled"===t?(e("#donation_notification_subject").parents("tr").show(),e("#wp-donation_notification-wrap").parents("tr").show(),e("#admin_notice_emails").parents("tr").show()):(e("#donation_notification_subject").parents("tr").hide(),e("#wp-donation_notification-wrap").parents("tr").hide(),e("#admin_notice_emails").parents("tr").hide())}).change()},main_setting_update_notice:function(){var t=e("#setting-error-give-setting-updated");t.length&&window.setTimeout(function(){t.slideUp()},5e3)},verify_settings:function(){var t=e("#success_page"),i=e("#failure_page");t.add(i).change(function(){if(t.val()===i.val()){var n='<div id="setting-error-give-matched-success-failure-page" class="updated settings-error notice is-dismissible"> <p><strong>'+give_vars.matched_success_failure_page+'</strong></p> <button type="button" class="notice-dismiss"><span class="screen-reader-text">'+give_vars.dismiss_notice_text+"</span></button> </div>",a=e("#setting-error-give-matched-success-failure-page");if(e(this).val(""),a.length)return!1;e("h1","#give-mainform").after(n),a=e("#setting-error-give-matched-success-failure-page"),e(".notice-dismiss",a).click(function(){a.remove()})}}).change()},saveButtonTriggered:function(){e(".give-settings-setting-page").on("click",".give-save-button",function(){e(window).unbind("beforeunload")})},changeAlert:function(){e(window).bind("beforeunload",function(e){var t=give_vars.setting_not_save_message;if(give_setting_edit)return(e||window.event).returnValue=t,t})},detectSettingsChange:function(){var t=e(".give-settings-setting-page");if(t.length>0){var i=e("#give-mainform").serialize();t.on("change keyup blur","form",function(){var t=e("#give-mainform").serialize();give_setting_edit=i!==t})}}},l={init:function(){this.date_options(),this.donors_export(),this.recount_stats()},date_options:function(){e("#give-graphs-date-options").change(function(){var t=e(this);"other"===t.val()?e("#give-date-range-options").show():e("#give-date-range-options").hide()})},donors_export:function(){e("#give_donor_export_form").change(function(){var t=e(this),i=e("option:selected",t).val(),n=e("#give_customer_export_option");"0"===t.val()?n.show():n.hide();var a=e(".give_price_options_select");if(0!=parseInt(i)){var s={action:"give_check_for_form_price_variations",form_id:i,all_prices:!0};e.post(ajaxurl,s,function(t){a.remove(),e("#give_donor_export_form_chosen").after(t)})}else a.remove()})},recount_stats:function(){e("body").on("change","#recount-stats-type",function(){var t=e("#give-tools-recount-form"),i=e("option:selected",this).data("type"),n=e("#recount-stats-submit"),a=e(".tools-form-dropdown");if(t.find(".notice-wrap").remove(),n.removeClass("button-disabled").attr("disabled",!1),a.hide(),e(".give-recount-stats-descriptions span").hide(),"reset-stats"===i){t.append('<div class="notice-wrap"></div>');var s=t.find(".notice-wrap");s.html('<div class="notice notice-warning"><p><input type="checkbox" id="confirm-reset" name="confirm_reset_store" value="1" /> <label for="confirm-reset">'+give_vars.reset_stats_warn+"</label></p></div>"),n.addClass("button-disabled").attr("disabled","disabled")}else if("delete-test-donors"===i){t.append('<div class="notice-wrap"></div>');var s=t.find(".notice-wrap");s.html('<div class="notice notice-warning"><p><input type="checkbox" id="confirm-reset" name="confirm_reset_store" value="1" /> <label for="confirm-reset">'+give_vars.delete_test_donor+"</label></p></div>"),n.addClass("button-disabled").attr("disabled","disabled")}else if("delete-import-donors"===i){t.append('<div class="notice-wrap"></div>');var s=t.find(".notice-wrap");s.html('<div class="notice notice-warning"><p><input type="checkbox" id="confirm-reset" name="confirm_reset_store" value="1" /> <label for="confirm-reset">'+give_vars.delete_import_donor+"</label></p></div>"),n.addClass("button-disabled").attr("disabled","disabled")}else a.hide(),a.val(0);current_forms=e(".tools-form-dropdown-"+i),current_forms.show(),current_forms.find(".give-select-chosen").css({width:"auto","min-width":"250px"}),e("#"+i).show()}),e("body").on("change","#confirm-reset",function(){var t=e(this).is(":checked");t?e("#recount-stats-submit").removeClass("button-disabled").removeAttr("disabled"):e("#recount-stats-submit").addClass("button-disabled").attr("disabled","disabled")}),e("#give-tools-recount-form").submit(function(t){var i=e("#recount-stats-type").val(),n=e(this),a=e("option:selected",this).data("type");if("reset-stats"===a){var s=e("#confirm-reset").is(":checked");if(s)return!0;r=!0}n.find(".notice-wrap").remove(),n.append('<div class="notice-wrap"></div>');var o=n.find(".notice-wrap"),r=!1;if(null!==i&&0!==i||(o.html('<div class="updated error"><p>'+give_vars.batch_export_no_class+"</p></div>"),r=!0),"recount-form"===a){var d=e('select[name="form_id"]').val();0==d&&(o.html('<div class="updated error"><p>'+give_vars.batch_export_no_reqs+"</p></div>"),r=!0)}if(r)return n.find(".button-disabled").removeClass("button-disabled"),!1})}},v={init:function(){this.submit(),this.dismiss_message()},submit:function(){var t=this;e(document.body).on("submit",".give-export-form",function(i){i.preventDefault();var n=e(this).find('input[type="submit"]');if(!n.hasClass("button-disabled")){var a=e(this).serialize();n.addClass("button-disabled"),e("form.give-export-form select").attr("disabled",!0).trigger("chosen:updated"),e(this).find(".notice-wrap").remove(),e(this).append('<div class="notice-wrap give-clearfix"><span class="spinner is-active"></span><div class="give-progress"><div></div></div></div>'),t.process_step(1,a,t)}})},process_step:function(t,i,n){give_setting_edit=!0;var a=!1;e.ajax({type:"POST",url:ajaxurl,data:{form:i,action:"give_do_ajax_export",step:t},dataType:"json",success:function(t){if("done"==t.step||t.error||t.success){give_setting_edit=!1,a=!0;var s=e(".give-export-form").find(".give-progress").parent().parent(),o=s.find(".notice-wrap");if(s.find(".button-disabled").removeClass("button-disabled"),e("form.give-export-form select").attr("disabled",!1).trigger("chosen:updated"),t.error){var r=t.message;o.html('<div class="updated error"><p>'+r+"</p></div>")}else if(t.success){var d=t.message;o.html('<div id="give-batch-success" class="updated notice is-dismissible"><p>'+d+'<span class="notice-dismiss"></span></p></div>')}else o.remove(),window.location=t.url}else e(".give-progress div").animate({width:t.percentage+"%"},50,function(){}),n.process_step(parseInt(t.step),i,n);!0===a&&(e("#give-tools-recount-form")[0].reset(),e("#give-tools-recount-form .tools-form-dropdown").hide(),e("#give-tools-recount-form .tools-form-dropdown-recount-form-select").val("0").trigger("chosen:updated"))}}).fail(function(t){give_setting_edit=!1,window.console&&window.console.log&&console.log(t),e(".notice-wrap").append(t.responseText)})},dismiss_message:function(){e("body").on("click","#give-batch-success .notice-dismiss",function(){e("#give-batch-success").parent().slideUp("fast")})}},u={el:{},init:function(){this.submit(),this.dismiss_message()},submit:function(){var t=this;t.el.main_container=Give_Selector_Cache.get("#give-db-updates"),t.el.update_link=Give_Selector_Cache.get(".give-update-button a",t.el.main_container),t.el.run_upload_container=Give_Selector_Cache.get(".give-run-database-update",t.el.progress_main_container),t.el.progress_main_container=Give_Selector_Cache.get(".progress-container",t.el.main_container),t.el.heading=Give_Selector_Cache.get(".update-message",t.el.progress_main_container),t.el.progress_container=Give_Selector_Cache.get(".progress-content",t.el.progress_main_container),t.el.update_progress_counter=Give_Selector_Cache.get(e(".give-update-progress-count")),t.el.main_container.data("resume-update")&&(t.el.update_link.addClass("active").hide().removeClass("give-hidden"),window.setTimeout(u.get_db_updates_info,1e3,t)),t.el.update_link.hasClass("active")||(t.el.update_link.on("click","",function(e){e.preventDefault(),t.el.run_upload_container.find(".notice").remove(),t.el.run_upload_container.append('<div class="notice notice-error non-dismissible give-run-update-containt"><p> <a href="#" class="give-run-update-button button">'+give_vars.db_update_confirmation_msg_button+"</a> "+give_vars.db_update_confirmation_msg+"</p></div>")}),e("#give-db-updates").on("click","a.give-run-update-button",function(i){return i.preventDefault(),!e(this).hasClass("active")&&(e(this).addClass("active").fadeOut(),t.el.update_link.addClass("active").fadeOut(),e("#give-db-updates .give-run-update-containt").slideUp(),t.el.progress_container.find(".notice-wrap").remove(),t.el.progress_container.append('<div class="notice-wrap give-clearfix"><span class="spinner is-active"></span><div class="give-progress"><div></div></div></div>'),t.el.progress_main_container.removeClass("give-hidden"),e.ajax({type:"POST",url:ajaxurl,data:{action:"give_run_db_updates",run_db_update:1},dataType:"json",success:function(e){}}),window.setTimeout(u.get_db_updates_info,500,t),!1)}))},get_db_updates_info:function(t){e.ajax({type:"POST",url:ajaxurl,data:{action:"give_db_updates_info"},dataType:"json",success:function(i){var n=Give_Selector_Cache.get(".notice-wrap",t.el.progress_container,!0);-1!==e.inArray("success",Object.keys(i))?i.success?(t.el.update_progress_counter.length&&t.el.update_progress_counter.text("100%"),-1!==e.inArray("heading",Object.keys(i.data))&&t.el.heading.html("<strong>"+i.data.heading+"</strong>"),t.el.update_link.closest("p").remove(),n.html('<div class="notice notice-success is-dismissible"><p>'+i.data.message+'</p><button type="button" class="notice-dismiss"></button></div>')):(-1!==e.inArray("heading",Object.keys(i.data))&&t.el.heading.html("<strong>"+i.data.heading+"</strong>"),n.html('<div class="notice notice-error"><p>'+i.data.message+"</p></div>"),setTimeout(function(){t.el.update_link.removeClass("active").show(),t.el.progress_main_container.addClass("give-hidden")},1e3)):i&&-1!==e.inArray("percentage",Object.keys(i.data))?(t.el.update_progress_counter.length&&t.el.update_progress_counter.text(i.data.total_percentage+"%"),-1!==e.inArray("heading",Object.keys(i.data))&&t.el.heading.html("<strong>"+i.data.heading+"</strong>"),e(".give-progress div","#give-db-updates").animate({width:i.data.percentage+"%"},50,function(){}),window.setTimeout(u.get_db_updates_info,1e3,t)):(n.html('<div class="notice notice-error"><p>'+give_vars.updates.ajax_error+"</p></div>"),setTimeout(function(){t.el.update_link.removeClass("active").show(),t.el.progress_main_container.addClass("give-hidden")},1e3))}})},process_step:function(t,i,n){give_setting_edit=!0,e.ajax({type:"POST",url:ajaxurl,data:{action:"give_do_ajax_updates",step:parseInt(t),update:parseInt(i)},dataType:"json",success:function(t){give_setting_edit=!1;var i=Give_Selector_Cache.get(".notice-wrap",n.el.progress_container,!0);-1!==e.inArray("success",Object.keys(t))?t.success?(-1!==e.inArray("heading",Object.keys(t.data))&&n.el.heading.html("<strong>"+t.data.heading+"</strong>"),n.el.update_link.closest("p").remove(),i.html('<div class="notice notice-success is-dismissible"><p>'+t.data.message+'</p><button type="button" class="notice-dismiss"></button></div>')):(-1!==e.inArray("heading",Object.keys(t.data))&&n.el.heading.html("<strong>"+t.data.heading+"</strong>"),i.html('<div class="notice notice-error"><p>'+t.data.message+"</p></div>"),setTimeout(function(){n.el.update_link.removeClass("active").show(),n.el.progress_main_container.addClass("give-hidden")},5e3)):t&&-1!==e.inArray("percentage",Object.keys(t.data))?(e(".give-progress div","#give-db-updates").animate({width:t.data.percentage+"%"},50,function(){}),-1!==e.inArray("heading",Object.keys(t.data))&&n.el.heading.html("<strong>"+t.data.heading.replace("{update_count}",n.el.heading.data("update-count"))+"</strong>"),n.process_step(parseInt(t.data.step),t.data.update,n)):(i.html('<div class="notice notice-error"><p>'+give_vars.updates.ajax_error+"</p></div>"),setTimeout(function(){n.el.update_link.removeClass("active").show(),n.el.progress_main_container.addClass("give-hidden")},5e3))}}).fail(function(e){give_setting_edit=!1,window.console&&window.console.log&&console.log(e),Give_Selector_Cache.get(".notice-wrap",self.el.progress_container).append(e.responseText)}).always(function(){})},dismiss_message:function(){e("body").on("click","#poststuff .notice-dismiss",function(){e(this).parent().slideUp("fast")})}},g=function(){e('select[name="give-payment-status"]').on("change",function(){var t=e(this).val();e(".give-donation-status").removeClass(function(e,t){return(t.match(/\bstatus-\S+/g)||[]).join(" ")}).addClass("status-"+t)})},p={init:function(){this.editDonor(),this.add_email(),this.removeUser(),this.cancelEdit(),this.add_note(),this.delete_checked(),this.addressesAction(),this.unlockDonorFields(),this.bulkDeleteDonor(),e("body").on("click",'#give-donors-filter .bulkactions input[type="submit"]',this.handleBulkActions)},unlockDonorFields:function(t){e("body").on("click",".give-lock-block",function(e){alert(give_vars.unlock_donor_fields),e.preventDefault()})},editDonor:function(){e("body").on("click","#edit-donor",function(t){t.preventDefault(),e("#give-donor-card-wrapper .editable").hide(),e("#give-donor-card-wrapper .edit-item").fadeIn().css("display","block")})},removeUser:function(){e("body").on("click","#disconnect-donor",function(t){if(t.preventDefault(),!confirm(give_vars.disconnect_user))return!1;var i=e('input[name="customerinfo[id]"]').val(),n={give_action:"disconnect-userid",customer_id:i,_wpnonce:e("#edit-donor-info #_wpnonce").val()};e.post(ajaxurl,n,function(e){window.location.href=e.redirect},"json")})},cancelEdit:function(){e("body").on("click","#give-edit-donor-cancel",function(t){t.preventDefault(),e("#give-donor-card-wrapper .edit-item").hide(),e("#give-donor-card-wrapper .editable").show(),e(".give_user_search_results").html("")})},add_note:function(){e("body").on("click","#add-donor-note",function(t){t.preventDefault();var i={give_action:"add-donor-note",customer_id:e("#donor-id").val(),donor_note:e("#donor-note").val(),add_donor_note_nonce:e("#add_donor_note_nonce").val()};if(i.donor_note)e.ajax({type:"POST",data:i,url:ajaxurl,success:function(t){e("#give-donor-notes").prepend(t),e(".give-no-donor-notes").hide(),e("#donor-note").val("")}}).fail(function(e){window.console&&window.console.log&&console.log(e)});else{var n=e("#donor-note").css("border-color");e("#donor-note").css("border-color","red"),setTimeout(function(){e("#donor-note").css("border-color",n)},500)}})},delete_checked:function(){e("#give-donor-delete-confirm").change(function(){var t=e("#give-donor-delete-records"),i=e("#give-delete-donor");e(this).prop("checked")?(t.attr("disabled",!1),i.attr("disabled",!1)):(t.attr("disabled",!0),t.prop("checked",!1),i.attr("disabled",!0))})},add_email:function(){e("#add-donor-email").length&&e(document.body).on("click","#add-donor-email",function(t){t.preventDefault();var i=e(this),n=i.parent();n.parent().find(".notice-wrap").remove(),n.find(".spinner").css("visibility","visible"),i.attr("disabled",!0);var a=n.find('input[name="donor-id"]').val(),s=n.find('input[name="additional-email"]').val(),o=n.find('input[name="make-additional-primary"]').is(":checked"),r=n.find('input[name="add_email_nonce"]').val(),d={give_action:"add_donor_email",customer_id:a,email:s,primary:o,_wpnonce:r};e.post(ajaxurl,d,function(e){!0===e.success?window.location.href=e.redirect:(i.attr("disabled",!1),n.after('<div class="notice-wrap"><div class="notice notice-error inline"><p>'+e.message+"</p></div></div>"),n.find(".spinner").css("visibility","hidden"))},"json")})},addressesAction:function(){var t=this,n=e("#donor-address-wrapper"),a=e(".all-address",n),s=e(".give-no-address-message",n),o=e(a).parent(),r=e(".address-form",n),d=e(".js-cancel",r),c=e('select[name="country"]',r),l=e(".add-new-address",n),v=parseInt(e('input[name="donor-id"]').val());c.on("change",function(){e(this).trigger("chosen:updated")}),a.on("click",".js-edit",function(i){var n=e(this).closest(".address");i.preventDefault(),e(".notice",o).remove(),t.__set_address_form_val(n),t.__set_address_form_action("update",n.data("address-id")),l.hide(),a.addClass("give-hidden"),r.removeClass("add-new-address-form-hidden"),r.data("process","update")}),a.on("click",".js-remove",function(i){i.preventDefault();var n=e(this).closest(".address");e(".notice",o).remove(),r.data("changed",!0),t.__set_address_form_val(n),t.__set_address_form_action("remove",n.data("address-id")),r.trigger("submit")}),l.on("click",function(i){i.preventDefault(),e(".notice",o).remove(),e(this).hide(),a.addClass("give-hidden"),r.removeClass("add-new-address-form-hidden"),t.__set_address_form_action("add"),t.__set_address_form_action()}),d.on("click",function(e){e.preventDefault(),r.find('input[type="text"]').val(""),l.show(),a.removeClass("give-hidden"),r.addClass("add-new-address-form-hidden")}),r.on("change",function(){e(this).data("changed",!0)}).on("submit",function(t){t.preventDefault();var d=e(this);return e(".notice",o).remove(),e(this).data("changed")?(e.ajax({type:"POST",url:ajaxurl,data:{action:"donor_manage_addresses",donorID:v,form:e("form",r).serialize()},beforeSend:function(){i(n,{show:!0})},success:function(t){if(i(n),t.success){var r;switch(t.data.action){case"add":e(".give-grid-row",a).append(t.data.address_html),!s.hasClass("give-hidden")&&e("div.give-grid-col-4",a).length&&s.addClass("give-hidden");break;case"remove":r=a.find('div[data-address-id*="'+t.data.id+'"]').parent(),r.length&&r.animate({"margin-left":"-999"},1e3,function(){r.remove(),s.hasClass("give-hidden")&&!e("div.give-grid-col-4",a).length&&s.removeClass("give-hidden")});break;case"update":r=a.find('div[data-address-id*="'+t.data.id+'"]').parent();var d=r.prev(),c={},l=!1;parseInt(e(".give-grid-row>div",a).length)<2?e(".give-grid-row",a).append(t.data.address_html):(d.length&&(d.after(t.data.address_html),l=!0),l||(c=r.next(),c.length&&c.before(t.data.address_html))),r.remove()}o.prepend(t.data.success_msg)}else o.prepend(t.data.error_msg)},dataType:"json"}).always(function(){d.data("changed",!1),r.find('input[type="text"]').val(""),l.show(),a.removeClass("give-hidden"),r.addClass("add-new-address-form-hidden")}),!1):(l.show(),a.removeClass("give-hidden"),r.addClass("add-new-address-form-hidden"),!1)})},__set_address_form_action:function(t,i){var n=e("#donor-address-wrapper"),a=e(".address-form",n),s=e('input[name="address-action"]',a),o=e('input[name="address-id"]',a);t=t||"add",i=i||"billing",s.val(t),o.val(i)},__set_address_form_val:function(t){var i=e("#donor-address-wrapper"),n=e(".address-form",i),a=e('[data-address-type="state"]',t).text().substr(2).trim();e('select[name="country"]',n).val().trim()!==e('[data-address-type="country"]',t).text().trim()?(e('select[name="country"]',n).val(e('[data-address-type="country"]',t).text().trim()).trigger("chosen:updated").change(),window.setTimeout(function(){e('[name="state"]',n).val(a).trigger("chosen:updated")},500)):e('[name="state"]',n).val(a).trigger("chosen:updated"),e('input[name="line1"]',n).val(e('[data-address-type="line1"]',t).text().trim()),e('input[name="line2"]',n).val(e('[data-address-type="line2"]',t).text().trim()),e('input[name="city"]',n).val(e('[data-address-type="city"]',t).text().trim()),e('input[name="zip"]',n).val(e('[data-address-type="zip"]',t).text().trim())},bulkDeleteDonor:function(){var t=e("body");t.on("click","#give-bulk-delete-cancel",function(t){e(this).closest("tr").hide(),
e(".give-skip-donor").trigger("click"),t.preventDefault()}),t.on("click","#cb-select-all-1, #cb-select-all-2",function(){var t=e(this);e.each(e(".donor-selector"),function(){var i=e(this).val(),n=e(this).data("name"),a='<div id="give-donor-'+i+'" data-id="'+i+'"><a class="give-skip-donor" title="'+give_vars.remove_from_bulk_delete+'">X</a>'+n+"</div>";t.is(":checked")&&!e(this).is(":checked")?e("#give-bulk-donors").append(a):t.is(":checked")||e("#give-bulk-donors").find("#give-donor-"+i).remove()})}),t.on("click",".donor-selector",function(){var t=e(this).val(),i=e(this).data("name"),n='<div id="give-donor-'+t+'" data-id="'+t+'"><a class="give-skip-donor" title="'+give_vars.remove_from_bulk_delete+'">X</a>'+i+"</div>";e(this).is(":checked")?e("#give-bulk-donors").prepend(n):e("#give-bulk-donors").find("#give-donor-"+t).remove()}),t.on("click","#give-delete-donor-confirm",function(){e(this).is(":checked")?e("#give-bulk-delete-button").removeAttr("disabled"):(e("#give-bulk-delete-button").attr("disabled",!0),e("#give-delete-donor-records").removeAttr("checked"))}),t.on("click","#give-delete-donor-records",function(){e(this).is(":checked")&&(e("#give-delete-donor-confirm").attr("checked","checked"),e("#give-bulk-delete-button").removeAttr("disabled"))}),t.on("click",".give-skip-donor",function(){var t=e(this).closest("div").data("id");e("#give-donor-"+t).remove(),e("#donor-"+t).find('input[type="checkbox"]').removeAttr("checked")}),t.on("click",".give-single-donor-delete",function(t){var i=e(this).data("id"),n=e("tr#donor-"+i).find(".donor-selector"),a=e('[id^="cb-select-all-"]'),s=e("#give-bulk-donors"),o=n.data("name"),r='<div id="give-donor-'+i+'" data-id="'+i+'"><a class="give-skip-donor" title="'+give_vars.remove_from_bulk_delete+'">X</a>'+o+"</div>";s.html(""),a.is(":checked")&&a.removeAttr("checked"),e(".donor-selector").removeAttr("checked"),n.attr("checked","checked"),0===e("#give-donor-"+i).length&&(s.prepend(r),e("#give-bulk-delete").slideDown()),t.preventDefault()})},handleBulkActions:function(t){var i=e(this).closest(".tablenav").find("select").val(),n=[],a=give_vars.donors_bulk_action.no_action_selected,s=give_vars.donors_bulk_action.no_donor_selected;return e.each(e(".donor-selector:checked"),function(){n.push(e(this).val())}),"-1"===i?(alert(a),!1):parseInt(n)?("delete"===i&&e("#give-bulk-delete").slideDown(),void t.preventDefault()):(alert(s),!1)}},_={init:function(){this.revoke_api_key(),this.regenerate_api_key()},revoke_api_key:function(){e("body").on("click",".give-revoke-api-key",function(e){return confirm(give_vars.revoke_api_key)})},regenerate_api_key:function(){e("body").on("click",".give-regenerate-api-key",function(e){return confirm(give_vars.regenerate_api_key)})}},h={init:function(){var t=e.query.get("give_tab").length?e.query.get("give_tab"):"form_field_options";this.handle_metabox_tab_click(),this.setup_colorpicker_fields(),this.setup_media_fields(),this.setup_repeatable_fields(),this.handle_repeater_group_events(),this.handle_multi_levels_repeater_group_events(),this.activate_tab(e('a[href="#'+t+'"]'))},handle_metabox_tab_click:function(){var t=this,i=e(".give-metabox-tabs a");i.on("click",function(i){i.preventDefault(),$this=e(this),t.activate_tab($this),t.update_query($this)})},activate_tab:function(t){var i=t.data("tab-id"),n=t.parent(),a=e("ul.give-metabox-sub-tabs",n),s=a.length,o=e(".give-metabox-tabs a"),r=o.parents("li"),d=e("ul.give-metabox-sub-tabs"),c=t.parents("ul.give-metabox-sub-tabs").length;if(e("#give_form_active_tab").val(i),s){n.toggleClass("active"),a.removeClass("give-hidden");var l=e("li.active","ul.give-metabox-sub-tabs");d.not(a).addClass("give-hidden"),r.not(n).removeClass("active"),l.addClass("active")}else c?c&&(e("ul.give-metabox-sub-tabs").addClass("give-hidden"),r.removeClass("active"),t.parents("ul.give-metabox-sub-tabs").removeClass("give-hidden").children("li").removeClass("active"),t.parents("li.has-sub-fields").addClass("active")):r.each(function(t,i){i=e(i),i.removeClass("active"),i.hasClass("has-sub-fields")&&e("ul.give-metabox-sub-tabs",i).addClass("give-hidden")});t.parent().addClass("active"),e(".give_options_panel").removeClass("active"),e(t.attr("href")).addClass("active")},update_query:function(t){var i=t.data("tab-id"),n=e.query.set("give_tab",i).remove("message").toString();history.replaceState&&history.replaceState(null,null,n)},setup_colorpicker_fields:function(){e(document).ready(function(){var t=e(".give-colorpicker");t.length&&t.each(function(t,i){var n=e(i);n.parents(".give-template").length||n.wpColorPicker()})})},setup_media_fields:function(){var t,i,n=e("body");n.on("click",".give-upload-button",function(a){a.preventDefault();var s={};switch(i=e(this),e(this).data("field-type")){case"media":s={title:give_vars.metabox_fields.media.button_title,button:{text:give_vars.metabox_fields.media.button_title},multiple:!1,library:{type:"image"}};break;default:s={title:give_vars.metabox_fields.file.button_title,button:{text:give_vars.metabox_fields.file.button_title},multiple:!1}}var o=jQuery(this).closest(".give-field-wrap").find(".give-input-field").attr("editing");"undefined"!=typeof o&&(wp.media.controller.Library.prototype.defaults.contentUserSetting=!1);var r=jQuery(this).closest(".give-field-wrap").find(".give-input-field").attr("library");"undefined"!=typeof r&&""!==r&&(s.library={type:r}),t=wp.media(s),t.on("select",function(){var e=t.state().get("selection").first().toJSON(),a=i.prev(),s="id"===i.data("fvalue")?e.id:e.url;if(n.trigger("give_media_inserted",[e,a]),a.val(s),"id"!==i.data("fvalue")){var o='input[name="'+a.attr("name")+'_id"]',r=a.closest("tr").next("tr").find(o);r.length&&a.closest("tr").next("tr").find(o).val(e.id)}}),t.open()}),n.on("give_media_inserted",function(t,n){var a=i.parents(".give-field-wrap"),s=e(".give-image-thumb",a);return!!s.length&&("image"!==n.type?(s.addClass("give-hidden"),e("img",s).attr("src",""),!1):(s.find("img").attr("src",n.url),void s.removeClass("give-hidden")))}),e("span.give-delete-image-thumb",".give-image-thumb").on("click",function(t){t.preventDefault();var i=e(this).parents(".give-field-wrap"),n=e(this).parent(),a=e('input[type="text"]',i);n.addClass("give-hidden"),a.val(""),e("img",n).attr("src","")})},setup_repeatable_fields:function(){jQuery(function(){jQuery(".give-repeatable-field-section").each(function(){var t=e(this),i={wrapper:".give-repeatable-fields-section-wrapper",container:".container",row:".give-row",add:".give-add-repeater-field-section-row",remove:".give-remove",move:".give-move",template:".give-template",confirm_before_remove_row:!0,confirm_before_remove_row_text:give_vars.confirm_before_remove_row_text,is_sortable:!0,before_add:null,after_add:f,before_remove:null,after_remove:m,sortable_options:{placeholder:"give-ui-placeholder-state-highlight",start:function(t,i){e("body").trigger("repeater_field_sorting_start",[i.item])},stop:function(t,i){e("body").trigger("repeater_field_sorting_stop",[i.item])},update:function(i,n){n.item.next().hasClass("give-template")&&n.item.next().after(n.item);var a=e(".give-row",t).not(".give-template");if(a.length){var s=1;a.each(function(t,i){var n=e(".give-field, label",e(i));n.length&&n.each(function(){var t=e(this).parents(".give-field-wrap"),i=e(this);e.each(this.attributes,function(e,n){var a=this.value.replace(/\[/g,"_").replace(/]/g,""),o=a+"_field",r="",d="";this.value&&(this.value=this.value.replace(/\[\d+\]/g,"["+(s-1)+"]"),d=this.value.replace(/\[/g,"_").replace(/]/g,""),t.hasClass(o)&&(r=d+"_field",t.removeClass(o).addClass(r)),a==i.attr("id")&&i.attr("id",d))})}),s++}),t.trigger("repeater_field_row_reordered",[n.item])}}}};jQuery(this).repeatable_fields(i)})})},handle_repeater_group_events:function(){var t=e(".give-repeatable-field-section"),i=e("body");i.on("click",".give-row-head button",function(){var t=e(this).closest("tr");t.toggleClass("closed"),e(".give-row-body",t).toggle()}),t.on("repeater_field_new_row_added repeater_field_row_deleted repeater_field_row_reordered",function(){b(e(this))}),i.on("repeater_field_sorting_start",function(t,i){var n=e(".wp-editor-area",i);n.length&&n.each(function(t,i){window.setTimeout(function(){tinyMCE.execCommand("mceRemoveEditor",!0,e(i).attr("id"))},300)})}),i.on("repeater_field_sorting_stop",function(t,i){var n=e(".wp-editor-area",i);n.length&&n.each(function(t,i){window.setTimeout(function(){var t=e(i).attr("id");tinyMCE.execCommand("mceAddEditor",!0,t),window.setTimeout(function(){switchEditors.go(t,"html"),e("#"+t+"-tmce").trigger("click")},100)},300)})}),t.each(function(t,i){var n=e(i);b(n),parseInt(n.data("close-tabs"))&&(e(".give-row-head button",n).trigger("click"),e(".give-template",n).removeClass("closed"),e(".give-template .give-row-body",n).show())}),t.on("repeater_field_new_row_added",function(t,i,n){e(".give-colorpicker",e(this)).each(function(t,i){var n=e(i);n.parents(".wp-picker-container").length||n.parents(".give-template").length||n.wpColorPicker()});var a=e("div[data-wp-editor]",n);a.length&&a.each(function(t,i){var n=e(i),a=e(".wp-editor-wrap",n),s=e("textarea",n),o="give_wysiwyg_unique_"+Math.random().toString().replace(".","_"),r=a.prev();s.attr("id",o),e.post(ajaxurl,{action:"give_load_wp_editor",wp_editor:n.data("wp-editor"),wp_editor_id:o,textarea_name:e("textarea",n).attr("name")},function(t){a.remove(),r.after(t),tinyMCEPreInit.qtInit[s.attr("id")]=e.extend(!0,tinyMCEPreInit.qtInit._give_agree_text,{id:o}),tinyMCEPreInit.mceInit[o]=e.extend(!0,tinyMCEPreInit.mceInit._give_agree_text,{body_class:o+" post-type-give_forms post-status-publish locale-"+tinyMCEPreInit.mceInit._give_agree_text.wp_lang_attr.toLowerCase(),selector:"#"+o}),tinymce.init(tinyMCEPreInit.mceInit[o]),quicktags(tinyMCEPreInit.qtInit[o]),QTags._buttonsInit(),window.setTimeout(function(){switchEditors.go(o,"html"),e("#"+o+"-tmce").trigger("click")},100),window.wpActiveEditor||(window.wpActiveEditor=o)})})})},handle_multi_levels_repeater_group_events:function(){var t=e("#_give_donation_levels_field");e("body").on("keyup",".give-multilevel-text-field",function(){var t=e(this).closest("tr"),i=e(".give-row-head h2 span",t),n=i.data("header-title");return(!e(this).val()||e(this).val()!==i.html())&&void(e(this).val()?i.html(n+": "+e(this).val()):i.html(n))}),e(".give-multilevel-text-field").each(function(t,i){if(t){var n=e(i),a=n.closest("tr"),s=e(".give-row-head h2 span",a),o=s.data("header-title");return(!n.val()||n.val()!==s.html())&&void(n.val()?s.html(o+": "+n.val()):s.html(o))}}),t.on("repeater_field_row_deleted",function(){var t=e(this);window.setTimeout(function(){var i=t,n=e(".give-row",i).not(".give-template"),a=e(".give-give_default_radio_inline",n),s=n.length;1===s&&a.prop("checked",!0)},200)}),t.on("repeater_field_new_row_added",function(t,i,n){var a=e(this),s=0;window.setTimeout(function(){e(".give-give_default_radio_inline",a).is(":checked")===!1&&e(".give-row",a).not(".give-template").first().find(".give-give_default_radio_inline").prop("checked",!0)},200),e('input[type="hidden"].give-levels_id',a).each(function(t,i){var n=e(i),a=parseInt(n.val());s<a&&(s=a)}),e('input[type="hidden"].give-levels_id',n).val(++s)})}},f=function(t,i){var n=e(t).attr("data-rf-row-count"),a=e(t),s=a.parents(".give-repeatable-field-section");n++,e("*",i).each(function(){e.each(this.attributes,function(e,t){this.value=this.value.replace("{{row-count-placeholder}}",n-1)})}),e(t).attr("data-rf-row-count",n),s.trigger("repeater_field_new_row_added",[t,i])},m=function(t){var i=e(t),n=i.parents(".give-repeatable-field-section"),a=e(t).attr("data-rf-row-count");i.attr("data-rf-row-count",--a),n.trigger("repeater_field_row_deleted")},b=function(t){if(parseInt(t.data("group-numbering"))){var i=e(".give-row-head h2 span",t),n=i.data("header-title");i.each(function(t,i){var a=e(i);a.parents(".give-template").length||a.html(n+": "+t)})}},y={init:function(){e("body").on("click",'#give-payments-filter input[type="submit"]',this.handleBulkActions)},handleBulkActions:function(){var t=e(this).closest(".tablenav").find("select").val(),i=e(this).closest(".tablenav").find('option[value="'+t+'"]').text(),n=e('input[name="payment[]"]:checked').length,a=-1!==t.indexOf("set-status-"),s="",o="";if(t=a?"set-to-status":t,Object.keys(give_vars.donations_bulk_action).length)for(o in give_vars.donations_bulk_action)if(o===t)return s=a?give_vars.donations_bulk_action[t].zero.replace("{status}",i.replace("Set To ","")):give_vars.donations_bulk_action[t].zero,parseInt(n)?(s=1<n?give_vars.donations_bulk_action[t].multiple:give_vars.donations_bulk_action[t].single,window.confirm(s.replace("{payment_count}",n).replace("{status}",i.replace("Set To ","")))):(alert(s),!1);return!0}};e(function(){n(),s(),g(),o(),e.giveAjaxifyFields({type:"country_state",debug:!0}),r.init(),d.init(),c.init(),l.init(),p.init(),_.init(),v.init(),u.init(),h.init(),y.init(),e("a.give-rating-link").click(function(){jQuery(this).parent().text(jQuery(this).data("rated"))}),e(".give-ajax-user-search").on("keyup",function(){var t=e(this).val(),i="";e(this).data("exclude")&&(i=e(this).data("exclude")),e(".give-ajax").show(),data={action:"give_search_users",user_name:t,exclude:i},document.body.style.cursor="wait",e.ajax({type:"POST",data:data,dataType:"json",url:ajaxurl,success:function(t){e(".give-ajax").hide(),e(".give_user_search_results").removeClass("hidden"),e(".give_user_search_results span").html(""),e(t.results).appendTo(".give_user_search_results span"),document.body.style.cursor="default"}})}),e("body").on("click.giveSelectUser",".give_user_search_results span a",function(t){t.preventDefault();var i=e(this).data("login");e(".give-ajax-user-search").val(i),e(".give_user_search_results").addClass("hidden"),e(".give_user_search_results span").html("")}),e("body").on("click.giveCancelUserSearch",".give_user_search_results a.give-ajax-user-cancel",function(t){t.preventDefault(),e(".give-ajax-user-search").val(""),e(".give_user_search_results").addClass("hidden"),e(".give_user_search_results span").html("")});var i=e("#poststuff"),a=give_vars.thousands_separator,f=give_vars.decimal_separator,m="",b="",w="",k=f===a?1:0;i.on("keyup","input.give-money-field, input.give-price-field",function(){var t={label:give_vars.price_format_guide.trim()};m=(e(this).val().match(new RegExp(a,"g"))||[]).length,b=(e(this).val().match(new RegExp("[a-z]","g"))||[]).length,-1!==e(this).val().indexOf(a)&&k<m?e(this).giveHintCss("show",t):b?e(this).giveHintCss("show",t):e(this).giveHintCss("hide",t),m=b=""}),i.on("focusout","input.give-money-field, input.give-price-field",function(){if(w=t(e(this).val(),!1),t("0",!1)===t(e(this).val(),!1)){var i=e(this).attr("placeholder");return i=i?i:"0",e(this).val(i),!1}w=w.replace(".",f),-1!==w.indexOf("-")&&(w=w.replace("-","")),e(this).val(w)}),i.on("focusout","#_give_number_of_donation_goal",function(){1>e(this).val()&&e(this).val(1)}),e(".give-settings-page").on("click","#give-show-sub-nav",function(t){t.preventDefault();var i=e(this).next();return i.is(":hover")||i.toggleClass("give-hidden"),!1}).on("blur","#give-show-sub-nav",function(){var t=e(this).next();t.is(":hover")||t.addClass("give-hidden")}),e(".give_email_api_notification_status_setting input").change(function(){var t=e(this).val(),i="enabled"===t,n={};return e(this).closest(".give_options_panel").length?n=e(this).closest(".give_options_panel").children(".give-field-wrap:not(.give_email_api_notification_status_setting), .give-repeatable-field-section"):e(this).closest("table").length&&(n=e(this).closest("table").find("tr:not(.give_email_api_notification_status_setting)")),-1!==jQuery.inArray(t,["enabled","disabled","global"])&&(!!n.length&&void(i?n.show():n.hide()))}),e(".give_email_api_notification_status_setting input:checked").change(),give_render_responsive_tabs()})}(jQuery),jQuery(window).resize(function(){give_render_responsive_tabs()});